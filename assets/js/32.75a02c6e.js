(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{286:function(s,n,a){"use strict";a.r(n);var e=a(0),t=Object(e.a)({},function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前因","aria-hidden":"true"}},[s._v("#")]),s._v(" 前因")]),s._v(" "),a("p",[s._v("用swiper插件进行轮播循环滚动，测试模拟数据时正常滚动，")]),s._v(" "),a("p",[s._v("但使用for循环数据时，无法自己滚动，")]),s._v(" "),a("p",[s._v("在循环下面添加假数据时，又可以自己滚动了。")]),s._v(" "),a("p",[s._v("原因：在循环时，因为还没有")]),s._v(" "),a("h2",{attrs:{id:"解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案","aria-hidden":"true"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),a("p",[s._v("Vue.nextTick( [callback, context] )")]),s._v(" "),a("p",[s._v("在dom循环更新之后再进行dom更新，在数据修改之后使用这个方法修改dom。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 修改数据\nvm.msg = 'Hello'\n// DOM 还没有更新\nVue.nextTick(function () {\n// DOM 更新了\n})\n\n// 作为一个 Promise 使用 (2.1.0 起新增，详见接下来的提示)\nVue.nextTick()\n.then(function () {\n // DOM 更新了\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("把创建一个swiper放在nextTick里面进行创建，可以解决这个不滚动的问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("this.$nextTick(function(){\n     new Swiper('.swiper-container',{\n        direction: 'vertical',\n        slidesPerView: 2,\n        loop : true,\n        observer:true,//修改swiper自己或子元素时，自动初始化swiper \n        observeParents:true,//修改swiper的父元素时，自动初始化swiper \n        autoplay: {\n          delay: 2000,\n          stopOnLastSlide: false,\n          disableOnInteraction: false,\n          }\n        });\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"又遇新问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#又遇新问题","aria-hidden":"true"}},[s._v("#")]),s._v(" 又遇新问题")]),s._v(" "),a("p",[s._v("当我重新插入数据时，swiper的滚动会在新插入的数据节点胡乱滚动，")]),s._v(" "),a("h2",{attrs:{id:"新的解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新的解决方案","aria-hidden":"true"}},[s._v("#")]),s._v(" 新的解决方案")]),s._v(" "),a("p",[s._v("每次插入数据，重新删除所有的swiper的dom节点，然后重新创建swiper.")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<div class="message_content swiper-container" v-if="swiper">\n            <div class="swiper-wrapper">\n              <template >\n                <div class="swiper-slide" v-for="(item,index) in commentData" :key="index">\n                    <div class="img_name"><span class="photo"><img :src="item.avatar"></span><span class="name">{{item.nickname}}</span></div>\n                    <div class="message_text">{{item.content}}</div>\n                </div>\n              </template>\n            </div>\n  </div>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v('主要时v-if="swiper"的判断。')]),s._v(" "),a("p",[s._v("删除后重新创建，可以正常滚动。")]),s._v(" "),a("p",[s._v("关于swiper,遇到的问题，记录在此。")])])},[],!1,null,null,null);n.default=t.exports}}]);